<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employment Law Claim Calculator | Free Assessment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Lexend:wght@600;700;800&display=swap" rel="stylesheet">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'base': '#ffffff',
                        'surface': '#f8fafc',
                        'primary': '#3b82f6',
                        'secondary': '#1e40af',
                        'accent': '#10b981',
                        'text-main': '#1f2937',
                        'text-muted': '#6b7280',
                        'success': '#10b981',
                        'warning': '#f59e0b',
                        'danger': '#ef4444',
                        'border': '#e5e7eb'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        @tailwind base;
        @tailwind components;
        @tailwind utilities;

        @layer base {
            body {
                @apply bg-base text-text-main font-sans antialiased;
            }
            h1, h2, h3, h4, h5, h6 {
                @apply font-heading font-semibold;
            }
        }

        @layer components {
            .quiz-container {
                @apply max-w-4xl mx-auto bg-white rounded-xl shadow-lg border border-border;
            }
            .quiz-step {
                @apply p-8 md:p-12;
            }
            .progress-bar {
                @apply w-full bg-gray-200 rounded-full h-3 mb-8;
            }
            .progress-fill {
                @apply bg-gradient-to-r from-primary to-secondary h-3 rounded-full transition-all duration-500 ease-out;
            }
            .quiz-button {
                @apply w-full p-4 rounded-lg border-2 border-border bg-white text-left transition-all duration-300 hover:border-primary hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-primary/20 hover:shadow-md;
            }
            .quiz-button.selected {
                @apply border-primary bg-blue-50 shadow-md;
            }
            .quiz-button.multi-select {
                @apply flex items-start space-x-3;
            }
            .checkbox-custom {
                @apply w-5 h-5 border-2 border-border rounded flex-shrink-0 mt-0.5;
            }
            .checkbox-custom.checked {
                @apply border-primary bg-primary;
            }
            .slider-container {
                @apply relative;
            }
            .slider {
                @apply w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer;
            }
            .slider::-webkit-slider-thumb {
                @apply appearance-none w-6 h-6 bg-primary rounded-full cursor-pointer shadow-lg;
            }
            .slider::-moz-range-thumb {
                @apply w-6 h-6 bg-primary rounded-full cursor-pointer border-0 shadow-lg;
            }
            .form-input {
                @apply w-full p-4 bg-white border border-border rounded-lg text-text-main placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary hover:border-primary/50;
            }
            .submit-button {
                @apply w-full bg-primary text-white font-semibold py-4 px-8 rounded-lg text-lg transition-all duration-300 hover:bg-secondary hover:shadow-lg transform hover:scale-105;
            }
            .outline-glow-button {
                @apply w-full border-2 border-primary text-primary font-semibold py-4 px-8 rounded-lg text-lg transition-all duration-300 hover:bg-primary hover:text-white hover:shadow-lg transform hover:scale-105;
            }
            .results-card {
                @apply bg-gradient-to-br from-green-50 via-white to-green-50 rounded-lg p-8 border border-green-200;
            }
            .warning-card {
                @apply bg-gradient-to-br from-yellow-50 via-white to-yellow-50 rounded-lg p-8 border border-yellow-200;
            }
            .danger-card {
                @apply bg-gradient-to-br from-red-50 via-white to-red-50 rounded-lg p-8 border border-red-200;
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .slide-in {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50">
    <div class="container mx-auto px-4 py-8">
        <div class="quiz-container">
            <!-- Progress Bar -->
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill" style="width: 12.5%"></div>
            </div>

            <!-- Step 1: Hook & Engagement -->
            <div id="step-1" class="quiz-step fade-in">
                <h1 class="text-3xl md:text-4xl font-bold text-center mb-4">Could You Be Owed Workplace Compensation?</h1>
                <p class="text-xl text-text-muted text-center mb-8">Find out in under 5 minutes - thousands of employees are entitled to compensation</p>
                
                <div class="space-y-4">
                    <button class="quiz-button" data-value="yes-believe">
                        <span class="text-green-500 mr-2">✅</span> Yes, I believe so
                    </button>
                    <button class="quiz-button" data-value="yes-definitely">
                        <span class="text-green-500 mr-2">✅</span> Yes, definitely
                    </button>
                    <button class="quiz-button" data-value="no-check">
                        <span class="text-blue-500 mr-2">❌</span> No, but I want to check
                    </button>
                    <button class="quiz-button" data-value="not-sure">
                        <span class="text-gray-500 mr-2">❌</span> I'm not sure
                    </button>
                </div>
            </div>

            <!-- Step 2: Employment Details -->
            <div id="step-2" class="quiz-step hidden">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">Tell Us About Your Employment</h2>
                
                <div class="space-y-8">
                    <!-- Salary Slider -->
                    <div>
                        <label class="block text-lg font-semibold mb-4">Current/Most Recent Annual Salary (before tax):</label>
                        <div class="slider-container">
                            <input type="range" id="salary-slider" class="slider" min="15000" max="200000" value="35000" step="1000">
                            <div class="flex justify-between text-sm text-text-muted mt-2">
                                <span>£15,000</span>
                                <span id="salary-display" class="text-primary font-bold">£35,000</span>
                                <span>£200,000+</span>
                            </div>
                        </div>
                        <p class="text-sm text-text-muted mt-2">Include bonuses and benefits if applicable</p>
                    </div>

                    <!-- Employment Status -->
                    <div>
                        <label class="block text-lg font-semibold mb-4">Employment Status:</label>
                        <div class="space-y-3">
                            <button class="quiz-button" data-value="still-employed">Still employed at the same company</button>
                            <button class="quiz-button" data-value="resigned">Left the company (resigned)</button>
                            <button class="quiz-button" data-value="dismissed">Was dismissed/let go</button>
                            <button class="quiz-button" data-value="redundant">Made redundant</button>
                        </div>
                    </div>

                    <!-- Employment Duration -->
                    <div>
                        <label class="block text-lg font-semibold mb-4">How long were/have you been employed there?</label>
                        <div class="space-y-3">
                            <button class="quiz-button" data-value="less-2-years">Less than 2 years</button>
                            <button class="quiz-button" data-value="2-5-years">2-5 years</button>
                            <button class="quiz-button" data-value="5-10-years">5-10 years</button>
                            <button class="quiz-button" data-value="more-10-years">More than 10 years</button>
                        </div>
                    </div>

                    <!-- Company Size -->
                    <div>
                        <label class="block text-lg font-semibold mb-4">Company Size:</label>
                        <div class="space-y-3">
                            <button class="quiz-button" data-value="small">Small (under 50 employees)</button>
                            <button class="quiz-button" data-value="medium">Medium (50-250 employees)</button>
                            <button class="quiz-button" data-value="large">Large (250+ employees)</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Claim Type Selection -->
            <div id="step-3" class="quiz-step hidden">
                <h2 class="text-2xl md:text-3xl font-bold mb-4">What Type of Treatment Did You Experience?</h2>
                <p class="text-lg text-text-muted mb-8">Select all that apply - most workplace issues fall into multiple categories</p>
                
                <div class="space-y-4">
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="unfair-dismissal">
                        <div>
                            <div class="font-semibold">Unfair dismissal</div>
                            <div class="text-sm text-text-muted">Dismissed without proper process or fair reason</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="pay-claims">
                        <div>
                            <div class="font-semibold">Pay claims and disputes</div>
                            <div class="text-sm text-text-muted">Unpaid wages, holiday pay, overtime, bonuses</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="sex-discrimination">
                        <div>
                            <div class="font-semibold">Sex and gender discrimination</div>
                            <div class="text-sm text-text-muted">Treated unfairly due to gender/sex</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="constructive-dismissal">
                        <div>
                            <div class="font-semibold">Constructive dismissal</div>
                            <div class="text-sm text-text-muted">Forced to resign due to employer conduct</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="disability-discrimination">
                        <div>
                            <div class="font-semibold">Disability discrimination</div>
                            <div class="text-sm text-text-muted">Treated unfairly due to disability/health</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="race-discrimination">
                        <div>
                            <div class="font-semibold">Race and ethnicity discrimination</div>
                            <div class="text-sm text-text-muted">Treated unfairly due to race/ethnicity</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="age-discrimination">
                        <div>
                            <div class="font-semibold">Age discrimination</div>
                            <div class="text-sm text-text-muted">Treated unfairly due to your age</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="sexual-harassment">
                        <div>
                            <div class="font-semibold">Sexual harassment</div>
                            <div class="text-sm text-text-muted">Unwanted sexual conduct or comments</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="maternity-discrimination">
                        <div>
                            <div class="font-semibold">Maternity discrimination</div>
                            <div class="text-sm text-text-muted">Unfair treatment related to pregnancy/maternity</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="sexual-orientation-discrimination">
                        <div>
                            <div class="font-semibold">Sexual orientation discrimination</div>
                            <div class="text-sm text-text-muted">Treated unfairly due to sexual orientation</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="workplace-bullying">
                        <div>
                            <div class="font-semibold">Workplace bullying</div>
                            <div class="text-sm text-text-muted">Persistent intimidation or hostile behavior</div>
                        </div>
                    </label>
                    <label class="quiz-button multi-select">
                        <input type="checkbox" class="checkbox-custom" data-value="whistleblowing">
                        <div>
                            <div class="font-semibold">Whistleblowing</div>
                            <div class="text-sm text-text-muted">Retaliation for reporting wrongdoing</div>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Step 4: Timeline Assessment -->
            <div id="step-4" class="quiz-step hidden">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">When Did This Happen?</h2>
                
                <div class="space-y-4">
                    <button class="quiz-button" data-value="within-3-months">
                        <span class="text-green-500 mr-2">✅</span> Within the last 3 months (Within time limit)
                    </button>
                    <button class="quiz-button" data-value="3-6-months">
                        <span class="text-yellow-500 mr-2">⚠️</span> 3-6 months ago (Potentially within extended time limit)
                    </button>
                    <button class="quiz-button" data-value="6-12-months">
                        <span class="text-red-500 mr-2">❌</span> 6-12 months ago (May be out of time - urgent advice needed)
                    </button>
                    <button class="quiz-button" data-value="more-12-months">
                        <span class="text-red-500 mr-2">❌</span> More than 12 months ago (Likely out of time - exceptional circumstances only)
                    </button>
                </div>

                <div id="timeline-warning" class="hidden mt-6 p-4 bg-warning/10 border border-warning/20 rounded-lg">
                    <p class="text-warning font-semibold">⚠️ Time limits may apply to your claim - urgent legal advice is recommended</p>
                </div>
            </div>

            <!-- Step 5-6: Conditional Evidence Questions -->
            <div id="step-5" class="quiz-step hidden">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">Tell Us More About Your Situation</h2>
                <div id="conditional-questions"></div>
            </div>

            <!-- Step 7: Evidence Strength Assessment -->
            <div id="step-7" class="quiz-step hidden">
                <h2 class="text-2xl md:text-3xl font-bold mb-6">Assessing Your Case Strength</h2>
                
                <div class="space-y-8">
                    <!-- Written Evidence -->
                    <div>
                        <label class="block text-lg font-semibold mb-4">Do you have any written evidence?</label>
                        <div class="space-y-3">
                            <label class="quiz-button multi-select">
                                <input type="checkbox" class="checkbox-custom" data-value="emails">
                                <div>Emails discussing the issue</div>
                            </label>
                            <label class="quiz-button multi-select">
                                <input type="checkbox" class="checkbox-custom" data-value="text-messages">
                                <div>Text messages/WhatsApp</div>
                            </label>
                            <label class="quiz-button multi-select">
                                <input type="checkbox" class="checkbox-custom" data-value="company-policies">
                                <div>Company policies that were breached</div>
                            </label>
                            <label class="quiz-button multi-select">
                                <input type="checkbox" class="checkbox-custom" data-value="performance-reviews">
                                <div>Performance reviews/disciplinary letters</div>
                            </label>
                            <label class="quiz-button multi-select">
                                <input type="checkbox" class="checkbox-custom" data-value="medical-certificates">
                                <div>Medical certificates/fit notes</div>
                            </label>
                            <label class="quiz-button multi-select">
                                <input type="checkbox" class="checkbox-custom" data-value="no-written-evidence">
                                <div>No written evidence</div>
                            </label>
                        </div>
                    </div>

                    <!-- Witnesses -->
                    <div>
                        <label class="block text-lg font-semibold mb-4">Are there any witnesses to what happened?</label>
                        <div class="space-y-3">
                            <button class="quiz-button" data-value="yes-supportive">Yes, colleagues who would support me</button>
                            <button class="quiz-button" data-value="yes-reluctant">Yes, but they might be reluctant to speak</button>
                            <button class="quiz-button" data-value="no-witnesses">No direct witnesses</button>
                            <button class="quiz-button" data-value="not-applicable">Not applicable</button>
                        </div>
                    </div>

                    <!-- Formal Complaint -->
                    <div>
                        <label class="block text-lg font-semibold mb-4">Did you raise a formal complaint/grievance?</label>
                        <div class="space-y-3">
                            <button class="quiz-button" data-value="yes-formal">Yes, formal grievance raised</button>
                            <button class="quiz-button" data-value="yes-informal">Yes, informal complaint made</button>
                            <button class="quiz-button" data-value="wanted-to">No, but I wanted to</button>
                            <button class="quiz-button" data-value="didnt-know">No, I didn't know I could</button>
                        </div>
                    </div>

                    <!-- Impact Rating -->
                    <div>
                        <label class="block text-lg font-semibold mb-4">How would you rate the impact on you?</label>
                        <div class="space-y-3">
                            <button class="quiz-button" data-value="severe">Severe - significant financial/emotional impact</button>
                            <button class="quiz-button" data-value="moderate">Moderate - noticeable impact on work/life</button>
                            <button class="quiz-button" data-value="minor">Minor - some distress but manageable</button>
                            <button class="quiz-button" data-value="uncertain">Uncertain about the impact</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 8: Contact Details -->
            <div id="step-8" class="quiz-step hidden">
                <h2 class="text-2xl md:text-3xl font-bold mb-4">Get Your Compensation Estimate</h2>
                <p class="text-lg text-text-muted mb-8">Enter your details to see what your claim could be worth</p>
                
                <form id="contact-form" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-semibold mb-2">First Name *</label>
                            <input type="text" id="first-name" class="form-input" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2">Last Name *</label>
                            <input type="text" id="last-name" class="form-input" required>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold mb-2">Email Address *</label>
                        <input type="email" id="email" class="form-input" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold mb-2">Mobile Number *</label>
                        <input type="tel" id="phone" class="form-input" placeholder="+44 7xxx xxx xxx" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-semibold mb-2">Best time to contact</label>
                        <select id="contact-time" class="form-input">
                            <option value="morning">Morning</option>
                            <option value="afternoon">Afternoon</option>
                            <option value="evening">Evening</option>
                        </select>
                    </div>

                    <div class="space-y-4">
                        <label class="flex items-start space-x-3">
                            <input type="checkbox" id="consent-required" class="mt-1 w-5 h-5 text-primary" required>
                            <span class="text-sm">I consent to being contacted about my potential employment claim and receiving relevant legal information. I understand I can unsubscribe at any time. *</span>
                        </label>
                        
                        <label class="flex items-start space-x-3">
                            <input type="checkbox" id="consent-optional" class="mt-1 w-5 h-5 text-primary">
                            <span class="text-sm">I'd like to receive helpful employment law updates and guides</span>
                        </label>
                    </div>

                    <button type="submit" class="submit-button">
                        Get My Compensation Estimate
                    </button>
                </form>
            </div>

            <!-- Results Page -->
            <div id="results" class="quiz-step hidden">
                <div id="results-content"></div>
                
                <div class="mt-8 space-y-4">
                    <h3 class="text-xl font-bold">Next Steps</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <a href="#" id="book-consultation" class="submit-button text-center block">
                            Book Free Consultation
                        </a>
                        <a href="https://wa.me/44XXXXXXXXXX" class="outline-glow-button text-center block">
                            WhatsApp Us
                        </a>
                    </div>
                </div>

                <div class="mt-8 p-6 bg-surface/60 rounded-lg">
                    <h4 class="font-bold mb-4">Legal Disclaimer</h4>
                    <p class="text-sm text-text-muted">
                        The estimate provided is for guidance only and does not constitute legal advice. Actual compensation may vary based on individual circumstances. All communications are confidential and subject to legal professional privilege where applicable.
                    </p>
                    <p class="text-sm text-text-muted mt-2">
                        This assessment is based on current UK employment law and tribunal statistics. Time limits apply to most employment claims. For accurate legal advice specific to your situation, please book a consultation with one of our qualified employment lawyers.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Quiz State Management
        let quizData = {
            currentStep: 1,
            totalSteps: 8,
            answers: {},
            claimTypes: [],
            salary: 35000,
            timeline: null,
            evidence: [],
            witnesses: null,
            complaint: null,
            impact: null
        };

        // UK Legal Compensation Calculator
        const COMPENSATION_DATA = {
            unfair_dismissal: {
                basic_award: { max: 17130, median: 6746, average: 13749 },
                compensatory_cap: 115115,
                max_observed: 179000
            },
            discrimination: {
                injury_to_feelings: {
                    lower: 1100,
                    middle: 11200,
                    upper: 33700,
                    exceptional: 50000
                },
                max_observed: 995128
            },
            pay_claims: {
                et_limit: 25000,
                holiday_pay_weeks: 5.6,
                overtime_multiplier: 1.5
            }
        };

        // Initialize Quiz
        document.addEventListener('DOMContentLoaded', function() {
            initializeQuiz();
            setupEventListeners();
            updateProgress();
        });

        function initializeQuiz() {
            // Salary slider
            const salarySlider = document.getElementById('salary-slider');
            const salaryDisplay = document.getElementById('salary-display');
            
            salarySlider.addEventListener('input', function() {
                const value = parseInt(this.value);
                quizData.salary = value;
                salaryDisplay.textContent = `£${value.toLocaleString()}`;
            });

            // Checkbox styling
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const button = this.closest('.quiz-button');
                    if (this.checked) {
                        button.classList.add('selected');
                        this.classList.add('checked');
                    } else {
                        button.classList.remove('selected');
                        this.classList.remove('checked');
                    }
                });
            });
        }

        function setupEventListeners() {
            // Step navigation
            document.querySelectorAll('.quiz-button').forEach(button => {
                button.addEventListener('click', function(e) {
                    if (this.type === 'checkbox' || this.type === 'submit') return;
                    
                    e.preventDefault();
                    handleAnswer(this);
                });
            });

            // Form submission
            document.getElementById('contact-form').addEventListener('submit', function(e) {
                e.preventDefault();
                handleFormSubmission();
            });
        }

        function handleAnswer(button) {
            const step = quizData.currentStep;
            const value = button.dataset.value;
            
            // Remove previous selections for single-select questions
            if (step !== 3) { // Step 3 is multi-select
                button.parentElement.querySelectorAll('.quiz-button').forEach(btn => {
                    btn.classList.remove('selected');
                });
            }
            
            button.classList.add('selected');
            
            // Store answer
            if (step === 3) {
                // Multi-select for claim types
                if (!quizData.claimTypes.includes(value)) {
                    quizData.claimTypes.push(value);
                } else {
                    quizData.claimTypes = quizData.claimTypes.filter(type => type !== value);
                }
            } else {
                quizData.answers[`step_${step}`] = value;
            }

            // Special handling for timeline
            if (step === 4) {
                quizData.timeline = value;
                if (value === '6-12-months' || value === 'more-12-months') {
                    document.getElementById('timeline-warning').classList.remove('hidden');
                } else {
                    document.getElementById('timeline-warning').classList.add('hidden');
                }
            }

            // Track analytics
            gtag('event', 'quiz_step_completed', {
                'step_number': step,
                'step_name': `step_${step}`,
                'user_progress': (step / quizData.totalSteps) * 100
            });

            // Move to next step
            setTimeout(() => {
                nextStep();
            }, 300);
        }

        function nextStep() {
            const currentStepEl = document.getElementById(`step-${quizData.currentStep}`);
            currentStepEl.classList.add('hidden');
            
            quizData.currentStep++;
            
            if (quizData.currentStep <= quizData.totalSteps) {
                const nextStepEl = document.getElementById(`step-${quizData.currentStep}`);
                nextStepEl.classList.remove('hidden');
                nextStepEl.classList.add('fade-in');
                
                // Handle conditional questions for step 5
                if (quizData.currentStep === 5) {
                    generateConditionalQuestions();
                }
                
                updateProgress();
            } else {
                showResults();
            }
        }

        function generateConditionalQuestions() {
            const container = document.getElementById('conditional-questions');
            let html = '';

            quizData.claimTypes.forEach(claimType => {
                switch(claimType) {
                    case 'unfair-dismissal':
                        html += generateUnfairDismissalQuestions();
                        break;
                    case 'pay-claims':
                        html += generatePayClaimsQuestions();
                        break;
                    case 'sex-discrimination':
                        html += generateSexDiscriminationQuestions();
                        break;
                    // Add more claim type questions as needed
                }
            });

            container.innerHTML = html;
        }

        function generateUnfairDismissalQuestions() {
            return `
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Unfair Dismissal Details</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block font-semibold mb-2">What reason were you given for dismissal?</label>
                            <div class="space-y-2">
                                <label class="quiz-button multi-select">
                                    <input type="checkbox" class="checkbox-custom" data-value="no-reason">
                                    <div>No reason given</div>
                                </label>
                                <label class="quiz-button multi-select">
                                    <input type="checkbox" class="checkbox-custom" data-value="performance">
                                    <div>Performance issues</div>
                                </label>
                                <label class="quiz-button multi-select">
                                    <input type="checkbox" class="checkbox-custom" data-value="misconduct">
                                    <div>Misconduct allegations</div>
                                </label>
                                <label class="quiz-button multi-select">
                                    <input type="checkbox" class="checkbox-custom" data-value="redundancy">
                                    <div>Redundancy (but others kept on)</div>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="block font-semibold mb-2">Did your employer follow proper dismissal procedures?</label>
                            <div class="space-y-2">
                                <button class="quiz-button" data-value="no-process">No investigation or meetings</button>
                                <button class="quiz-button" data-value="brief-process">Very brief/unfair process</button>
                                <button class="quiz-button" data-value="some-process">Some process but felt unfair</button>
                                <button class="quiz-button" data-value="not-sure">Not sure about the process</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function generatePayClaimsQuestions() {
            return `
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Pay Claims Details</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block font-semibold mb-2">What type of pay issue?</label>
                            <div class="space-y-2">
                                <label class="quiz-button multi-select">
                                    <input type="checkbox" class="checkbox-custom" data-value="unpaid-wages">
                                    <div>Unpaid wages/salary</div>
                                </label>
                                <label class="quiz-button multi-select">
                                    <input type="checkbox" class="checkbox-custom" data-value="unpaid-holiday">
                                    <div>Unpaid holiday pay</div>
                                </label>
                                <label class="quiz-button multi-select">
                                    <input type="checkbox" class="checkbox-custom" data-value="unpaid-overtime">
                                    <div>Unpaid overtime</div>
                                </label>
                                <label class="quiz-button multi-select">
                                    <input type="checkbox" class="checkbox-custom" data-value="unpaid-bonuses">
                                    <div>Unpaid bonuses/commission</div>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="block font-semibold mb-2">How much are you owed approximately?</label>
                            <input type="number" id="amount-owed" class="form-input" placeholder="£0">
                        </div>
                    </div>
                </div>
            `;
        }

        function generateSexDiscriminationQuestions() {
            return `
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Sex/Gender Discrimination Details</h3>
                    <div class="space-y-2">
                        <label class="quiz-button multi-select">
                            <input type="checkbox" class="checkbox-custom" data-value="passed-over">
                            <div>Passed over for promotion</div>
                        </label>
                        <label class="quiz-button multi-select">
                            <input type="checkbox" class="checkbox-custom" data-value="paid-less">
                            <div>Paid less than male colleagues</div>
                        </label>
                        <label class="quiz-button multi-select">
                            <input type="checkbox" class="checkbox-custom" data-value="inappropriate-comments">
                            <div>Inappropriate comments about gender</div>
                        </label>
                        <label class="quiz-button multi-select">
                            <input type="checkbox" class="checkbox-custom" data-value="pregnancy-treatment">
                            <div>Treated differently due to pregnancy/maternity</div>
                        </label>
                    </div>
                </div>
            `;
        }

        function handleFormSubmission() {
            // Collect form data
            const formData = {
                firstName: document.getElementById('first-name').value,
                lastName: document.getElementById('last-name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                contactTime: document.getElementById('contact-time').value,
                consentRequired: document.getElementById('consent-required').checked,
                consentOptional: document.getElementById('consent-optional').checked
            };

            // Calculate compensation estimate
            const estimate = calculateCompensation();
            
            // Send to Attio CRM
            sendToAttio(formData, estimate);
            
            // Show results
            showResults(estimate);
        }

        function calculateCompensation() {
            let estimate = {
                min: 0,
                max: 0,
                strength: 'weak',
                breakdown: []
            };

            // Calculate based on claim types and evidence
            quizData.claimTypes.forEach(claimType => {
                switch(claimType) {
                    case 'unfair-dismissal':
                        const unfairDismissalEstimate = calculateUnfairDismissal();
                        estimate.min += unfairDismissalEstimate.min;
                        estimate.max += unfairDismissalEstimate.max;
                        estimate.breakdown.push(unfairDismissalEstimate);
                        break;
                    case 'pay-claims':
                        const payEstimate = calculatePayClaims();
                        estimate.min += payEstimate.min;
                        estimate.max += payEstimate.max;
                        estimate.breakdown.push(payEstimate);
                        break;
                    // Add more claim type calculations
                }
            });

            // Calculate case strength
            estimate.strength = calculateCaseStrength();

            return estimate;
        }

        function calculateUnfairDismissal() {
            const weeklySalary = quizData.salary / 52;
            const yearsService = getYearsService();
            const ageMultiplier = getAgeMultiplier();
            
            const basicAward = Math.min(weeklySalary * yearsService * ageMultiplier, 17130);
            const compensatoryAward = Math.min(weeklySalary * 52, 115115);
            
            return {
                type: 'Unfair Dismissal',
                min: basicAward,
                max: basicAward + compensatoryAward,
                breakdown: {
                    basicAward: basicAward,
                    compensatoryAward: compensatoryAward
                }
            };
        }

        function calculatePayClaims() {
            const amountOwed = document.getElementById('amount-owed')?.value || 0;
            return {
                type: 'Pay Claims',
                min: Math.max(amountOwed, 1000),
                max: Math.max(amountOwed * 1.5, 5000),
                breakdown: {
                    amountOwed: amountOwed
                }
            };
        }

        function calculateCaseStrength() {
            let score = 0;
            
            // Evidence scoring
            const evidenceCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            score += evidenceCheckboxes.length * 10;
            
            // Witnesses
            if (quizData.answers.step_7 === 'yes-supportive') score += 25;
            else if (quizData.answers.step_7 === 'yes-reluctant') score += 15;
            
            // Formal complaint
            if (quizData.answers.step_7 === 'yes-formal') score += 20;
            else if (quizData.answers.step_7 === 'yes-informal') score += 10;
            
            // Impact
            if (quizData.answers.step_7 === 'severe') score += 25;
            else if (quizData.answers.step_7 === 'moderate') score += 15;
            
            if (score >= 70) return 'strong';
            if (score >= 40) return 'good';
            return 'weak';
        }

        function getYearsService() {
            const duration = quizData.answers.step_2;
            switch(duration) {
                case 'less-2-years': return 1;
                case '2-5-years': return 3.5;
                case '5-10-years': return 7.5;
                case 'more-10-years': return 12;
                default: return 2;
            }
        }

        function getAgeMultiplier() {
            // Simplified age multiplier - in reality would need age input
            return 1.5;
        }

        function showResults(estimate) {
            const resultsContent = document.getElementById('results-content');
            let html = '';

            if (estimate.strength === 'strong') {
                html = `
                    <div class="results-card">
                        <h2 class="text-3xl font-bold text-success mb-4">You Could Be Entitled To: £${estimate.min.toLocaleString()} - £${estimate.max.toLocaleString()}</h2>
                        <p class="text-lg mb-6">Based on your responses, you appear to have a strong case with good evidence.</p>
                        <div class="space-y-2">
                            ${estimate.breakdown.map(item => `
                                <div class="flex justify-between">
                                    <span>${item.type}:</span>
                                    <span>£${item.min.toLocaleString()} - £${item.max.toLocaleString()}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            } else if (estimate.strength === 'good') {
                html = `
                    <div class="warning-card">
                        <h2 class="text-3xl font-bold text-warning mb-4">You Could Be Entitled To: £${estimate.min.toLocaleString()} - £${estimate.max.toLocaleString()}</h2>
                        <p class="text-lg mb-6">You appear to have a good case, though additional evidence could strengthen your claim.</p>
                    </div>
                `;
            } else {
                html = `
                    <div class="danger-card">
                        <h2 class="text-3xl font-bold text-danger mb-4">Your Case Requires Further Investigation</h2>
                        <p class="text-lg mb-4">Potential Value: £${estimate.min.toLocaleString()} - £${estimate.max.toLocaleString()}</p>
                        <p class="text-lg mb-6">While you may have a valid claim, we'd need to investigate further to assess its full strength.</p>
                    </div>
                `;
            }

            if (quizData.timeline === '6-12-months' || quizData.timeline === 'more-12-months') {
                html = `
                    <div class="danger-card">
                        <h2 class="text-3xl font-bold text-danger mb-4">⚠️ URGENT: Time Limits May Apply</h2>
                        <p class="text-lg mb-4">Potential Value: £${estimate.min.toLocaleString()} - £${estimate.max.toLocaleString()}</p>
                        <p class="text-lg mb-6">Your claim may be outside normal time limits. Immediate legal advice is essential.</p>
                    </div>
                `;
            }

            resultsContent.innerHTML = html;
            
            // Show results step
            document.getElementById('step-8').classList.add('hidden');
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').classList.add('fade-in');
            
            // Track completion
            gtag('event', 'quiz_completed', {
                'estimated_value': estimate.max,
                'case_strength': estimate.strength,
                'time_to_complete': Date.now() - quizData.startTime
            });
        }

        async function sendToAttio(formData, estimate) {
            const payload = {
                data: {
                    values: {
                        "first-name": formData.firstName,
                        "last-name": formData.lastName,
                        "email-addresses": [{ "email-address": formData.email }],
                        "phone-numbers": [{ "phone-number": formData.phone }],
                        "estimated-claim-value": `£${estimate.min.toLocaleString()} - £${estimate.max.toLocaleString()}`,
                        "claim-types": quizData.claimTypes.join(", "),
                        "case-strength": estimate.strength,
                        "salary": quizData.salary,
                        "employment-status": quizData.answers.step_2,
                        "timeline-risk": quizData.timeline,
                        "evidence-strength": calculateCaseStrength(),
                        "quiz-completion-date": new Date().toISOString(),
                        "lead-source": "Website Quiz",
                        "urgency-level": quizData.timeline === '6-12-months' || quizData.timeline === 'more-12-months' ? 'high' : 'normal'
                    }
                }
            };

            try {
                const response = await fetch('https://api.attio.com/v2/objects/people', {
                    method: 'POST',
                    headers: {
                        'Authorization': 'Bearer YOUR_ATTIO_API_KEY',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    console.log('Successfully sent to Attio CRM');
                } else {
                    console.error('Failed to send to Attio CRM');
                }
            } catch (error) {
                console.error('Error sending to Attio CRM:', error);
            }
        }

        function updateProgress() {
            const progress = (quizData.currentStep / quizData.totalSteps) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
        }

        // Initialize start time
        quizData.startTime = Date.now();
    </script>
</body>
</html>
